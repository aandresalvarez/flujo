# mkdocs.yml for the Flujo project

site_name: Flujo
site_description: The Framework for AI Systems That Learn
site_url: https://flujo.dev # Aspirational URL

repo_name: aandresalvarez/flujo
repo_url: https://github.com/aandresalvarez/flujo
edit_uri: edit/main/docs/

# Disable strict mode to allow for more flexible builds
strict: false

# Define the site navigation structure
nav:
  - 'Introduction': 'getting-started/index.md'
  - 'Getting Started':
    - 'Installation': 'getting-started/installation.md'
    - 'Quickstart': 'getting-started/quickstart.md'
    - 'Tutorial': 'getting-started/tutorial.md'
  - 'User Guide':
    - 'Usage': 'user_guide/usage.md'
    - 'Concepts': 'user_guide/concepts.md'
    - 'The Flujo Way': 'user_guide/The_flujo_way.md'
    - 'Pipelines and Steps': 'user_guide/pipelines-and-steps.md'
    - 'Agentic Patterns': 'user_guide/agentic-patterns.md'
    - 'Use Cases': 'user_guide/use_cases.md'
    - 'Pipeline DSL': 'user_guide/pipeline_dsl.md'
    - 'Pipeline Context': 'user_guide/pipeline_context.md'
    - 'Pipeline Looping': 'user_guide/pipeline_looping.md'
    - 'Pipeline Branching': 'user_guide/pipeline_branching.md'
    - 'Modular Workflows': 'user_guide/modular_workflows.md'
    - 'State Machine Step': 'user_guide/state_machine_step.md'
    - 'Architect (Programmatic)': 'user_guide/architect_programmatic.md'
  - 'Advanced Topics':
    - 'Tools': 'advanced/tools.md'
    - 'Scoring': 'advanced/scoring.md'
    - 'Telemetry': 'advanced/telemetry.md'
    - 'Configuration': 'advanced/configuration.md'
    - 'Usage Estimation': 'advanced/usage_estimation.md'
    - 'Typed Outcomes': 'advanced/typed_outcomes.md'
    - 'State': 'advanced/state.md'
    - 'SQLite Backend': 'advanced/sqlite_backend_comprehensive_guide.md'
    - 'Troubleshooting': 'advanced/troubleshooting.md'
    - 'Extensible Step Primitives': 'advanced/extensible_step_primitives.md'
  - 'Guides':
    - 'SQLite Backend': 'guides/sqlite_backend_guide.md'
    - 'Tracing Guide': 'guides/tracing_guide.md'
    - 'Pipeline Versioning': 'guides/pipeline_versioning.md'
    - 'Durable Workflows': 'guides/durable_workflows.md'
    - 'Choosing Your Loop': 'guides/choosing_your_loop.md'
    - 'Custom State Backend': 'guides/custom_state_backend.md'
    - 'GPTâ€‘5 Architect': 'guides/gpt5_architect.md'
    - 'YAML: Human-in-the-Loop': 'hitl.md'
    - 'YAML: Cache': 'cache.md'
    - 'Architect Flow Fundamentals': 'architect_flow_first_principles.md'
  - 'Cookbook':
    - 'Pipeline as a Step': 'cookbook/pipeline_as_step.md'
    - 'Advanced Serialization': 'cookbook/advanced_serialization.md'
    - 'Hybrid Validation': 'cookbook/hybrid_validation.md'
    - 'Budget-Aware Workflows': 'cookbook/budget_aware_workflows.md'
    - 'Cost Control': 'cookbook/cost_control.md'
    - 'Error Recovery': 'cookbook/error_recovery.md'
    - 'Visualizing Pipelines': 'cookbook/visualizing_pipelines.md'
  - 'Development':
    - 'Testing Guide': 'advanced/testing_guide.md'
    - 'Extending': 'advanced/extending.md'
    - 'Troubleshooting': 'advanced/troubleshooting.md'
    - 'Development Guide': 'development/dev.md'
  - 'Migration':
    - 'v0.8.0': 'migration/v0.8.0.md'
    - 'v0.4.37': 'migration/v0.4.37.md'
    - 'v0.7.0': 'migration/v0.7.0.md'
    - 'v0.6.0': 'migration/v0.6.0.md'
    - 'v0.4.0': 'migration/v0.4.0.md'
  # API Reference - automatically generated from source code
  - 'API Reference': 'api/index.md'

# Configure the theme (Material for MkDocs is the best choice)
theme:
  name: "material"
  palette:
    - scheme: default
      primary: indigo
      accent: indigo
      toggle:
        icon: material/weather-sunny
        name: Switch to dark mode
    - scheme: slate
      primary: indigo
      accent: indigo
      toggle:
        icon: material/weather-night
        name: Switch to light mode
  features:
    - search.suggest
    - search.highlight
    - content.tabs.link
    - content.code.annotate
    - content.code.copy
    - navigation.tracking
    - navigation.sections

# Extensions for rendering rich markdown content
markdown_extensions:
  - admonition
  - pymdownx.details
  - pymdownx.superfences:
      custom_fences:
        - name: mermaid
          class: mermaid
          format: fence_code_format
  - pymdownx.tabbed:
      alternate_style: true

# The core plugin for auto-generating API docs from your code
plugins:
  - search
  - redirects:
      redirect_maps:
        user-guide/pipeline_dsl.md: user_guide/pipeline_dsl.md
        user-guide/pipeline_context.md: user_guide/pipeline_context.md
        user-guide/pipeline_looping.md: user_guide/pipeline_looping.md
        user-guide/pipeline_branching.md: user_guide/pipeline_branching.md
        user-guide/modular_workflows.md: user_guide/modular_workflows.md
  - mkdocstrings:
      handlers:
        python:
          # Tell mkdocstrings where to find the source code
          paths: [flujo]
          options:
            # Recommended options for a clean look
            show_root_heading: true
            show_source: false
            members_order: source
            separate_signature: true
            show_signature_annotations: true
          # Remove external inventory links that cause SSL issues
          # import:
          #   - url: https://docs.python.org/3/objects.inv
          #   - url: https://docs.pydantic.dev/latest/objects.inv

# mkdocs.yml for the Flujo project

site_name: Flujo
site_description: The Framework for AI Systems That Learn
site_url: https://flujo.dev # Aspirational URL

repo_name: aandresalvarez/flujo
repo_url: https://github.com/aandresalvarez/flujo
edit_uri: edit/main/docs/

# Disable strict mode to allow for more flexible builds
strict: false

# Define the site navigation structure
nav:
  - 'Introduction': 'index.md'
  - 'Getting Started':
    - 'Installation': 'installation.md'
    - 'Quickstart': 'quickstart.md'
    - 'Tutorial': 'tutorial.md'
  - 'User Guide':
    - 'Usage': 'usage.md'
    - 'Concepts': 'concepts.md'
    - 'Agent Infrastructure': 'agent_infrastructure.md'
    - 'The Flujo Way': 'The_flujo_way.md'
  - 'Advanced Topics':
    - 'Pipeline DSL': 'pipeline_dsl.md'
    - 'Pipeline Context': 'pipeline_context.md'
    - 'Pipeline Looping': 'pipeline_looping.md'
    - 'Pipeline Branching': 'pipeline_branching.md'
    - 'Tools': 'tools.md'
    - 'Scoring': 'scoring.md'
    - 'Telemetry': 'telemetry.md'
    - 'Configuration': 'configuration.md'
  - 'Guides':
    - 'SQLite Backend': 'guides/sqlite_backend_guide.md'
  - 'Cookbook':
    - 'Pipeline as a Step': 'cookbook/pipeline_as_step.md'
    - 'Advanced Serialization': 'cookbook/advanced_serialization.md'
    - 'Hybrid Validation': 'cookbook/hybrid_validation.md'
    - 'Budget-Aware Workflows': 'cookbook/budget_aware_workflows.md'
    - 'Cost Control': 'cookbook/cost_control.md'
    - 'Error Recovery': 'cookbook/error_recovery.md'
    - 'Visualizing Pipelines': 'cookbook/visualizing_pipelines.md'
  - 'Development':
    - 'Testing Guide': 'testing_guide.md'
    - 'Extending': 'extending.md'
    - 'Troubleshooting': 'troubleshooting.md'
    - 'Development Guide': 'dev.md'
  - 'Migration':
    - 'v0.7.0': 'migration/v0.7.0.md'
    - 'v0.6.0': 'migration/v0.6.0.md'
    - 'v0.4.0': 'migration/v0.4.0.md'
  # API Reference - automatically generated from source code
  - 'API Reference': 'api/index.md'

# Configure the theme (Material for MkDocs is the best choice)
theme:
  name: "material"
  palette:
    - scheme: default
      primary: indigo
      accent: indigo
      toggle:
        icon: material/weather-sunny
        name: Switch to dark mode
    - scheme: slate
      primary: indigo
      accent: indigo
      toggle:
        icon: material/weather-night
        name: Switch to light mode
  features:
    - search.suggest
    - search.highlight
    - content.tabs.link
    - content.code.annotate
    - content.code.copy
    - navigation.tracking
    - navigation.sections

# Extensions for rendering rich markdown content
markdown_extensions:
  - admonition
  - pymdownx.details
  - pymdownx.superfences:
      custom_fences:
        - name: mermaid
          class: mermaid
          format: fence_code_format
  - pymdownx.tabbed:
      alternate_style: true

# The core plugin for auto-generating API docs from your code
plugins:
  - search
  - mkdocstrings:
      handlers:
        python:
          # Tell mkdocstrings where to find the source code
          paths: [flujo]
          options:
            # Recommended options for a clean look
            show_root_heading: true
            show_source: false
            members_order: source
            separate_signature: true
            show_signature_annotations: true
          # Remove external inventory links that cause SSL issues
          # import:
          #   - url: https://docs.python.org/3/objects.inv
          #   - url: https://docs.pydantic.dev/latest/objects.inv

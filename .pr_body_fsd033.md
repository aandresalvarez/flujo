Feat(conversation): Intelligent Conversational History Management (FSD-033)

Fixes #439

Summary
- Adds zero‑boilerplate conversational loop support:
  - `conversation: true` mode with automatic `conversation_history` tracking.
  - History injection via a prompt processor; no mutation of agent definitions.
  - History management strategies: `truncate_tokens` / `truncate_turns` / `summarize` with centralized defaults and loop-level overrides.
  - Selection controls:
    - `ai_turn_source`: `last` | `all_agents` | `named_steps`
    - `user_turn_sources`: `hitl` and/or named steps
  - Lens: emits and renders `agent.prompt` events (redacted preview).
  - SQLite persistence: `conversation_history` survives pause/resume & restart.
  - CLI wizard presets for conversation scaffolding.

Highlights
- Policy (DefaultLoopStepExecutor):
  - Wires `ConversationHistoryPromptProcessor` per step when `conversation: true` and `step.use_history != false`.
  - Seeds initial user turn on iteration 1 if history is empty.
  - Appends user turns for top-level HITL outputs and assistant turns per `ai_turn_source`.
  - Supports nested and parallel: flattens nested `StepResult.step_history` so `ai_turn_source` can include nested outputs.
- HistoryManager:
  - Strategies: `truncate_tokens`, `truncate_turns`, `summarize`; centralized defaults from `config_manager`.
  - Loop meta overrides config defaults; summarized + bounded final slice.
  - Tool/function-call filtering by default.
- Lens/Tracing:
  - Processor emits `agent.prompt` events with sanitized `rendered_history`.
  - Trace persistence includes span events; `lens trace` renders redacted preview with `--prompt-preview-len` to control output.
- CLI Wizard:
  - New flags to scaffold conversational loops:
    - `--wizard-ai-turn-source` `last`|`all_agents`|`named_steps`
    - `--wizard-user-turn-sources` `hitl`,stepA,stepB
    - `--wizard-history-strategy` `truncate_tokens`|`truncate_turns`|`summarize`
    - `--wizard-history-max-tokens`, `--wizard-history-max-turns`, `--wizard-history-summarize-ratio`

Changes
- Policy: loop wiring, seeding, HITL/user/assistant turn appends, nested/parallel flattening.
- Persistence: span events saved for lens consumption.
- Lens: renders `agent.prompt` with a redacted preview; CLI supports `--prompt-preview-len`.
- Config: HistoryManager defaults via `config_manager` (FlujoConfig or dict); loop meta overrides applied.
- Wizard: conversation presets + history management controls.
- Tests:
  - Unit: history strategies, processor injection/filtering/redaction, lens event rendering, config precedence.
  - Integration: basic conversational loop, HITL pause/resume, `ai_turn_source` variants (`all_agents`, `named_steps`), nested conversation:true, parallel branches, SQLite pause/resume across restart.
  - Benchmark: conversational history binding overhead (env-gated strict perf).
- Docs/Examples:
  - `docs/conversational_loops.md`; `docs/acceptance_demo.md`
  - README/CHANGELOG updated; examples for minimal/named_steps/parallel.

FSD status
- M1–M7 complete (models, manager, processors, policy wiring, lens event + rendering, persistence/resume, wizard + precedence tests).
- M8: benchmark test added; strict <5 ms/iter gate enabled when `FLUJO_STRICT_PERF=1`.
- M9: docs/examples/README/changelog updated.
- M10: acceptance demo guide included; `make all` pending in CI.

Verification
- Type/Lint/Format:
  - `make typecheck`, `make lint`, `make format`
- Quick fast-subset (per `scripts/test_guide.md`):
  - `.venv/bin/python scripts/run_targeted_tests.py --full-suite --markers "not slow and not serial and not benchmark" --workers auto --timeout 60 --split-slow --slow-workers 1 --slow-timeout 120`
- New unit tests:
  - `uv run pytest -q tests/unit/test_config_precedence.py tests/unit/test_lens_event_rendering.py tests/unit/test_history_manager.py tests/unit/test_conversation_processor.py`
- New integration tests:
  - `uv run pytest -q tests/integration/test_conversational_loop_basic.py tests/integration/test_conversational_loop_hitl_pause.py tests/integration/test_conversational_loop_ai_turn_variants.py tests/integration/test_conversational_loop_nested.py tests/integration/test_conversational_loop_parallel.py tests/integration/test_conversation_sqlite_pause_resume.py`
- Benchmark:
  - `uv run pytest -q tests/benchmarks/test_conversational_overhead.py`
  - Strict gate: `FLUJO_STRICT_PERF=1 uv run pytest -q tests/benchmarks/test_conversational_overhead.py`

Security/Privacy
- `agent.prompt` previews are redacted and truncated before rendering in lens.
- Policies and domain logic do not read env directly; configuration is centralized via `config_manager`.

Acceptance Demo
- See `docs/acceptance_demo.md` (wizard → run → resume via script → inspect with `lens trace`).
